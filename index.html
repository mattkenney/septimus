<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<!-- @source:https://github.com/mattkenney/septimus -->
<title>Philly Train</title>
<meta content="width=device-width, initial-scale=1, user-scalable = no" name="viewport" />
<link href="/favicon.ico" rel="shortcut icon" />
<link href="/ico/apple-touch-icon-57-precomposed.png" rel="apple-touch-icon-precomposed" />
<link href="/ico/apple-touch-icon-72-precomposed.png" rel="apple-touch-icon-precomposed" sizes="72x72" />
<link href="/ico/apple-touch-icon-114-precomposed.png" rel="apple-touch-icon-precomposed" sizes="114x114" />
<link href="/ico/apple-touch-icon-144-precomposed.png" rel="apple-touch-icon-precomposed" sizes="144x144" />
<link href='//fonts.googleapis.com/css?family=Tauri' rel="stylesheet" type="text/css" />
<link href="/css/themes/septimus.min.css" rel="stylesheet" type="text/css" />
<link href="//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.3.1/jquery.mobile.structure.css" rel="stylesheet" type="text/css" />
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.10.1/jquery.min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-mobile/1.3.1/jquery.mobile.min.js" type="text/javascript"></script>
<script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
(function(){var f={"30th Street Station":{},"49th St":{r:"med"},"Airport Terminal A":{r:"air"},"Airport Terminal B":{r:"air"},"Airport Terminal C-D":{r:"air"},"Airport Terminal E-F":{r:"air"},Allegheny:{r:"nor"},"Allen Lane":{r:"chw"},Ambler:{r:"lan"},Angora:{r:"med"},Ardmore:{r:"pao"},Ardsley:{r:"war"},Bala:{r:"cyn"},Berwyn:{r:"pao"},Bethayres:{r:"wtr"},Bridesburg:{r:"tre"},Bristol:{r:"tre"},"Bryn Mawr":{r:"pao"},Carpenter:{r:"chw"},Chalfont:{r:"lan"},"Chelten Avenue":{r:"chw"},Cheltenham:{r:"fox"},"Chester TC":{r:"wil"},"Chestnut Hill East":{r:"che"},"Chestnut Hill West":{r:"chw"},"Churchmans Crossing":{r:"wil"},Claymont:{r:"wil"},"Clifton-Aldan":{r:"med"},Colmar:{r:"lan"},Conshohocken:{r:"nor"},"Cornwells Heights":{r:"tre"},Crestmont:{r:"war"},Croydon:{r:"tre"},"Crum Lynne":{r:"wil"},"Curtis Park":{r:"wil"},Cynwyd:{r:"cyn"},Darby:{r:"wil"},Daylesford:{r:"pao"},"Delaware Valley College":{r:"lan"},Devon:{r:"pao"},Downingtown:{r:"pao"},Doylestown:{r:"lan"},"East Falls":{r:"nor"},"Eastwick Station":{r:"air"},Eddington:{r:"tre"},Eddystone:{r:"wil"},"Elkins Park":{},"Elm St":{r:"nor"},"Elwyn Station":{r:"med"},Exton:{r:"pao"},"Fern Rock TC":{},Fernwood:{r:"med"},Folcroft:{r:"wil"},"Forest Hills":{r:"wtr"},Fortuna:{r:"lan"},"Fox Chase":{r:"fox"},"Ft Washington":{r:"lan"},Germantown:{r:"che"},Gladstone:{r:"med"},Glenolden:{r:"wil"},Glenside:{},Gravers:{r:"che"},"Gwynedd Valley":{r:"lan"},Hatboro:{r:"war"},Haverford:{r:"pao"},"Highland Ave":{r:"wil"},Highland:{r:"chw"},"Holmesburg Jct":{r:"tre"},"Ivy Ridge":{r:"nor"},"Jenkintown-Wyncote":{},Langhorne:{r:"wtr"},Lansdale:{r:"lan"},Lansdowne:{r:"med"},Lawndale:{r:"fox"},Levittown:{r:"tre"},"Link Belt":{r:"lan"},"Main St":{r:"nor"},Malvern:{r:"pao"},Manayunk:{r:"nor"},"Marcus Hook":{r:"wil"},"Market East":{},Meadowbrook:{r:"wtr"},Media:{r:"med"},"Melrose Park":{},Merion:{r:"pao"},Miquon:{r:"nor"},Morton:{r:"med"},"Moylan-Rose Valley":{r:"med"},"Mt Airy":{r:"che"},Narberth:{r:"pao"},"Neshaminy Falls":{r:"wtr"},"New Britain":{r:"lan"},Newark:{r:"wil"},Noble:{r:"wtr"},"Norristown TC":{r:"nor"},"North Broad St":{},"North Hills":{r:"lan"},"North Philadelphia":{r:"chw"},"North Wales":{r:"lan"},Norwood:{r:"wil"},Olney:{r:"fox"},Oreland:{r:"lan"},Overbrook:{r:"pao"},Paoli:{r:"pao"},Penllyn:{r:"lan"},Pennbrook:{r:"lan"},Philmont:{r:"wtr"},Primos:{r:"med"},"Prospect Park":{r:"wil"},"Queen Lane":{r:"chw"},Radnor:{r:"pao"},"Ridley Park":{r:"wil"},Rosemont:{r:"pao"},Roslyn:{r:"war"},Rydal:{r:"wtr"},Ryers:{r:"fox"},Secane:{r:"med"},Sedgwick:{r:"che"},"Sharon Hill":{r:"wil"},Somerton:{r:"wtr"},"Spring Mill":{r:"nor"},"St. Davids":{r:"pao"},"St. Martins":{r:"chw"},Stenton:{r:"che"},Strafford:{r:"pao"},"Suburban Station":{},Swarthmore:{r:"med"},Tacony:{r:"tre"},"Temple U":{},Thorndale:{r:"pao"},Torresdale:{r:"tre"},Trenton:{r:"tre"},Trevose:{r:"wtr"},Tulpehocken:{r:"chw"},"University City":{},Upsal:{r:"chw"},Villanova:{r:"pao"},Wallingford:{r:"med"},Warminster:{r:"war"},"Washington Lane":{r:"che"},"Wayne Jct":{},"Wayne-A":{r:"pao",alt:"Wayne Station"},"West Trenton":{r:"wtr"},Whitford:{r:"pao"},"Willow Grove":{r:"war"},Wilmington:{r:"wil"},Wissahickon:{r:"nor"},Wister:{r:"che"},Woodbourne:{r:"wtr"},Wyndmoor:{r:"che"},"Wynnefield Avenue":{r:"cyn"},Wynnewood:{r:"pao"},Yardley:{r:"wtr"}},p={air:"Airport",che:"Chestnut Hill East",chw:"Chestnut Hill West",cyn:"Cynwyd",fox:"Fox Chase",lan:"Lansdale/Doylestown",med:"Media/Elwyn",nor:"Manayunk/Norristown",pao:"Paoli/Thorndale",tre:"Trenton",war:"Warminster",wil:"Wilmington/Newark",wtr:"West Trenton"},c=_.map(f,function(u,t){return(u.alt||t);
}),m={},k="",r="",j="",a="";c.sort();if(window.localStorage&&window.JSON){m=JSON.parse(localStorage.getItem("recent")||"[]");
k=localStorage.getItem("from")||"";r=localStorage.getItem("to")||"";j=localStorage.getItem("train")||"";
a=localStorage.getItem("connection")||"";}function n(){var w=$("#stopfrom input").val(),t=$("#stopto input").val();
if(!w||!t){alert('First choose both a "from" station and a "to" station.');return;
}var v=e(w)[0];if(!v){alert('"'+w+'" is not a SEPTA station.');return;}var u=e(t)[0];
if(!u){alert('"'+t+'" is not a SEPTA station.');return;}k=v;r=u;$("#routes-list").empty();
$.mobile.changePage("#routes");}function s(x){var t=x;if(t&&!t.getHours){t=h(x)||x;
}if(t&&t.getHours){var u=t.getHours(),w=t.getMinutes(),v="AM",t;if(u>12){u-=12;v="PM";
}else{if(u===0){u=12;}}t=u+":"+String(100+w).substring(1)+" "+v;}return t;}function i(u,t){return function(){j=u;
a=t;$("#detail-list").empty();$.mobile.changePage("#detail");};}function o(t){return function(){m=_.filter(m,function(u){return(u.label!==t.label);
});if(window.localStorage&&window.JSON){localStorage.setItem("recent",JSON.stringify(m));
}d();};}function q(t){return function(){$("#stopfrom input").val(t.from);$("#stopto input").val(t.to);
n();};}function g(w,z,A,v,C){var B=$("<li></li>").appendTo(w).jqmData("theme","c"),D=v[C+"_line"]+" "+v[C+"_train"],t=v[C+"_departure_time"]||v[C+"_depart_time"],x=v[C+"_arrival_time"],u=v[C+"_delay"];
var y=$("<a></a>").attr("href","javascript:void(0)").click(i(v[C+"_train"],v.Connection)).appendTo(B);
$("<div></div>").appendTo(y).text(D).addClass("ui-li-desc");$("<div></div>").appendTo(y).text("Depart ").append(b(t,u));
$("<div></div>").appendTo(y).text("@ "+z);$("<div></div>").appendTo(y).text("Arrive ").append(b(x,u));
$("<div></div>").appendTo(y).text("@ "+A);}function l(v,t,u){return function(){v.val(u);
t.empty();t.listview("refresh");t.trigger("updatelayout");};}function b(w,v){var t=$("<span></span>");
if((/^([0-9]+) mins$/).test(v)){var x=0|RegExp.$1,u=h(w);if(u){u.setTime(u.getTime()+x*60000);
}u=s(u);$("<strike></strike>").appendTo(t).text(w);t.append(" ");$("<i></i>").appendTo(t).text(u);
}else{$("<span></span>").appendTo(t).text(s(w));$("<span></span>").appendTo(t).text(" ("+v+")");
}return t;}function e(u){var t=u&&u.toLowerCase();return _.filter(c,function(v){return(t===v.substring(0,t.length).toLowerCase());
});}function h(y){if((/^\s*([0-9]+):([0-9]+)((:([0-9]+))|(\s*(AM|PM)))\s*$/i).test(y)){var t=0|RegExp.$1,w=0|RegExp.$2,x=0|RegExp.$4,v=RegExp.$7.toUpperCase(),u=new Date();
if(t===12){t=0;}if(v==="PM"){t+=12;}u.setHours(t);u.setMinutes(w);u.setSeconds(x);
u.setMilliseconds(0);}return u;}function d(){var v=$("#recent ul"),x=_.sortBy(m,"label");
v.empty();for(var w=0;w<x.length;w++){var u=$("<li></li>").appendTo(v);var t=$("<a></a>").attr("href","javascript:void(0)").text(x[w].label).appendTo(u).click(q(x[w]));
t=$("<a></a>").attr("href","javascript:void(0)").jqmData("icon","delete").click(o(x[w])).appendTo(u);
}v.listview("refresh");v.trigger("updatelayout");$("#recent").toggle(!!x.length);
}$(document).on("pageinit","#search",function(){$("#stopfrom ul,#stopto ul").on("listviewbeforefilter",function(x,w){var z=$(w.input),y=$(w.input).val().toLowerCase(),t=$(this);
t.empty();if(c&&y){var v=e(y);for(var u=0;u<v.length;u++){$("<li></li>").text(v[u]).appendTo(t).click(l(z,t,v[u]));
}}t.listview("refresh");t.trigger("updatelayout");});$("#search").on("pagebeforeshow",function(){$("#stopfrom input").val("");
$("#stopto input").val("");$("#stopfrom ul,#stopto ul").empty().listview("refresh").trigger("updatelayout");
d();});$("#search form").on("submit",n);$("#find").click(n);});$(document).on("pageinit","#routes",function(){function t(y){$.mobile.loading("hide");
var v=$("#routes-list");v.empty();if(!y||!y.length){alert("No route found?!");return;
}for(var w=0;w<y.length;w++){var u=$("<li></li>").jqmData("role","list-divider").jqmData("theme","c").text(s(y[w].orig_departure_time)+" - "+s(y[w].term_arrival_time||y[w].orig_arrival_time)).appendTo(v);
g(v,k,y[w].Connection||r,y[w],"orig");if(y[w].isdirect==="true"){continue;}$("<span></span>").text(" - 1 connection").appendTo(u);
g(v,y[w].Connection,r,y[w],"term");}v.listview("refresh");v.trigger("updatelayout");
var x={from:k,to:r,label:k+" - "+r};m=_.filter(m,function(z){return(z.label!==x.label);
});m.push(x);while(m.length>10){m.shift();}if(window.localStorage&&window.JSON){localStorage.setItem("recent",JSON.stringify(m));
localStorage.setItem("from",k);localStorage.setItem("to",r);}}$("#routes").on("pagebeforeshow",function(){$("#routes-list").listview("refresh").trigger("updatelayout");
});$("#routes").on("pageshow",function(){if($("#routes-list li").length){}else{if(k&&r){$.mobile.loading("show");
var u=$.param({req1:k,req2:r});if(window._gaq){_gaq.push(["_trackEvent","API","NextToArrive",u]);
}$.ajax("http://www3.septa.org/hackathon/NextToArrive/",{data:u,dataType:"jsonp",error:function(){$.mobile.loading("hide");
alert("There was a problem contacting SEPTA.");},success:t});}else{setTimeout(function(){$.mobile.changePage("#search");
},0);}}});});$(document).on("pageinit","#detail",function(){function t(v){$.mobile.loading("hide");
var x=$("#detail-list");x.empty();if(!v||!v.length){alert("No train found?!");return;
}var D="-";for(var w=0;w<v.length;w++){if(!v[w]||!f[v[w].station]){continue;}for(var u=w;
u<v.length;u++){if(!v[u]||!f[v[u].station]||!f[v[u].station].r){continue;}var y=f[v[u].station].r;
if(D===y){break;}D=y;var z=$("<li></li>").jqmData("role","list-divider").jqmData("theme","c").text(p[y]+" "+j).appendTo(x);
break;}var B=$("<li></li>").appendTo(x).jqmData("theme","c");if(v[w].station===k||v[w].station===r||v[w].station===a){B.jqmData("role","list-divider").jqmData("theme","a");
}var A=$("<div></div>").appendTo(B);if(v[w].sched_tm===v[w].act_tm||v[w].sched_tm===v[w].est_tm){A.text(s(v[w].sched_tm));
}else{$("<strike></strike>").appendTo(A).text(s(v[w].sched_tm));A.append(" ");var C=h(v[w].act_tm);
if(C){A.append(s(C));}else{$("<i></i>").appendTo(A).text(s(v[w].est_tm));}}$("<div></div>").appendTo(B).text("@ "+(f[v[w].station].alt||v[w].station));
}x.listview("refresh");x.trigger("updatelayout");if(window.localStorage&&window.JSON){localStorage.setItem("train",j);
}}$("#detail").on("pagebeforeshow",function(){$("#detail-list").listview("refresh").trigger("updatelayout");
});$("#detail").on("pageshow",function(){if($("#detail-list li").length){}else{if(j){$.mobile.loading("show");
var u=$.param({req1:j});if(window._gaq){_gaq.push(["_trackEvent","API","RRSchedules",u]);
}$.ajax("http://www3.septa.org/hackathon/RRSchedules/",{data:u,dataType:"jsonp",error:function(){$.mobile.loading("hide");
alert("There was a problem contacting SEPTA.");},success:t});}else{setTimeout(function(){$.mobile.changePage("#routes");
},0);}}});});$(document).on("pageshow",function(){if(window._gaq&&$.mobile.activePage&&$.mobile.activePage[0]){_gaq.push(["_trackEvent","UI","pageshow",$.mobile.activePage[0].id]);
}});})();
/*]]>*/
</script>
</head>
<body>
<div data-role="page" id="search">
<div data-role="header"><h1>Philly Train</h1></div>
<div data-role="content">
<form action="javascript:void(0)">
<h2>Find Trip</h2>
<div id="stopfrom">
<ul data-filter="true" data-filter-placeholder="From station" data-inset="true" data-role="listview"></ul>
</div>
<div id="stopto">
<ul data-filter="true" data-filter-placeholder="To station" data-inset="true" data-role="listview"></ul>
</div>
<a href="javascript:void(0)" data-role="button" id="find">Find Trip</a>
<div id="recent">
<h2>Recent Trips</h2>
<ul data-inset="true" data-role="listview"></ul>
</div>
<div><a href="#about">About</a></div>
</form>
</div>
</div>
<div data-add-back-btn="true" data-role="page" id="routes">
<div data-role="header">
<a href="#search" data-icon="arrow-l">Back</a>
<h1>Philly Train</h1>
</div>
<div data-role="content">
<ul data-inset="true" data-role="listview" data-theme="c" id="routes-list"></ul>
</div>
</div>
<div data-add-back-btn="true" data-role="page" id="detail">
<div data-role="header">
<a href="#routes" data-icon="arrow-l">Back</a>
<h1>Philly Train</h1>
</div>
<div data-role="content">
<ul data-inset="true" data-role="listview" id="detail-list"></ul>
</div>
</div>
<div data-role="page" id="about">
<div data-role="header">
<a href="#search" data-icon="arrow-l">Back</a>
<h1>Philly Train</h1>
</div>
<div data-role="content">
<div>
Data provided by <a href="http://www3.septa.org/hackathon/" target="_blank">SEPTA</a>.
</div>
<div>
See also: <a href="http://baldwin.ph" target="_blank">Baldwin</a>.
</div>
<div>
See also: <a href="http://www.septanow.org" target="_blank">SEPTANow</a>.
</div>
<div>
Developed by matt<img alt="@" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAAXNSR0IArs4c6QAAANBJREFUKFO10LErxXEUBfDPk5IysCqljAblbcrKxiTym92/gEGGt7BJJsP9DywWBullovcnGN5o8LKQyWjw9fpSJjnTPbdzuuce/hutmkTEGHbRYA6v6OIwMx9gpBKP4xaLxTCBBdyjGxHLMFod2MdjZm5VuwHOIqKPU7RrQ4M1iIhzTGIlM1u4wzxVJMygX+Z1HBTzNE5w/dMwwGyZL3GEd9zgGdt8/+ECe9jJzA2/YFhrREyh57PGYzxhFZuZ2XzphpEy8wVLhfbwhg6u/AUfN6o0SCbgjeIAAAAASUVORK5CYII=" />phillytrain.com.
</div>
</div>
</div>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-41221215-1']);
_gaq.push(['_trackPageview']);
(function() {
var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>
</body>
</html>

